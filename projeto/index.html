<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Biblioteca - Microsserviços</title>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"
      integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2"
      crossorigin="anonymous"
    />
  </head>

  <body>
    <a href="/"><h1>Biblioteca</h1></a>
    <table class="table">
      <thead>
        <tr>
          <th>Título</th>
          <th>Autor</th>
          <th>Ano</th>
          <th>País</th>
          <th>Idioma</th>
          <th>Páginas</th>
        </tr>
      </thead>
      <tbody id="data-table"></tbody>
    </table>

    <script>
      async function main() {
        try {
          const response = await fetch("http://localhost:5030/books");
          const data = await response.json();
          console.log(data);

          const table = document.getElementById("data-table");

          data.forEach((item) => {
            let row = table.insertRow();
            let title = row.insertCell(0);
            title.innerHTML = item.title;
            let author = row.insertCell(1);
            author.innerHTML = item.author;
            let year = row.insertCell(2);
            year.innerHTML = item.year;
            let country = row.insertCell(3);
            country.innerHTML = item.country;
            let language = row.insertCell(4);
            language.innerHTML = item.language;
            let pages = row.insertCell(5);
            pages.innerHTML = item.pages;
          });
        } catch (error) {
          alert("Ocorreu um erro");
        }
      }

      main();
    </script>
  </body>
</html>
